{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/gabri/Documents/project/doc/next/user-management-app/components/ui/Button.js"],"sourcesContent":["// /components/ui/Button.js\r\nimport styles from '../../../styles/components/ui/Button.module.css';\r\n\r\nexport function Button({ children, onClick, disabled, variant = 'primary', ...props }) {\r\n  const className = `${styles.button} ${styles[variant]} ${disabled ? styles.disabled : ''}`;\r\n\r\n  return (\r\n    <button \r\n      onClick={onClick} \r\n      disabled={disabled}\r\n      className={className}\r\n      {...props}\r\n    >\r\n      {children}\r\n    </button>\r\n  );\r\n}"],"names":[],"mappings":"AAAA,2BAA2B;;;;;;;;;;;;;AAGpB,SAAS,OAAO,EAAE,QAAQ,EAAE,OAAO,EAAE,QAAQ,EAAE,UAAU,SAAS,EAAE,GAAG,OAAO;IACnF,MAAM,YAAY,GAAG,OAAO,MAAM,CAAC,CAAC,EAAE,MAAM,CAAC,QAAQ,CAAC,CAAC,EAAE,WAAW,OAAO,QAAQ,GAAG,IAAI;IAE1F,qBACE,qKAAC;QACC,SAAS;QACT,UAAU;QACV,WAAW;QACV,GAAG,KAAK;kBAER;;;;;;AAGP","debugId":null}},
    {"offset": {"line": 35, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/gabri/Documents/project/doc/next/user-management-app/pages/index.js"],"sourcesContent":["/*import { useState, useEffect } from 'react';\r\nimport UserList from '../components/UserList';\r\n\r\nexport default function Home() {\r\n  const [users, setUsers] = useState([]);\r\n  const [savedUsers, setSavedUsers] = useState([]);\r\n  const [activeTab, setActiveTab] = useState('api');\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState('');\r\n\r\n  const fetchUsers = async () => {\r\n    setLoading(true);\r\n    setError('');\r\n    try {\r\n      const response = await fetch('/api/users?size=10');\r\n      const result = await response.json();\r\n      \r\n      if (result.success) {\r\n        setUsers(result.data);\r\n      } else {\r\n        setError(result.message || 'Falha ao buscar usuários');\r\n      }\r\n    } catch (error) {\r\n      console.error('Erro ao buscar usuários:', error);\r\n      setError('Erro de rede: Não foi possível obter os usuários.');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const fetchSavedUsers = async () => {\r\n    try {\r\n      const response = await fetch('/api/records');\r\n      const data = await response.json();\r\n      setSavedUsers(data);\r\n    } catch (error) {\r\n      console.error('Erro ao buscar usuários salvos:', error);\r\n      setError('Falha ao carregar');\r\n    }\r\n  };\r\n\r\nconst saveUser = async (user) => {\r\n  try {\r\n    const response = await fetch('/api/save', {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify(user),\r\n    });\r\n    \r\n    const result = await response.json();\r\n    \r\n    if (response.ok) {\r\n      console.log('usuário salvo:', result);\r\n      return result; \r\n    } else {\r\n      new Error(result.message || 'Não foi possível salvar o  usuário!');\r\n    }\r\n  } catch (error) {\r\n    console.error('Erro ao salvar usuário!:', error);\r\n    throw error; \r\n  }\r\n};\r\n \r\n  const saveAllUsers = async () => {\r\n  setLoading(true);\r\n  try {\r\n    let successCount = 0;\r\n    let errorCount = 0;\r\n    \r\n    for (const user of users) {\r\n      try {\r\n        await saveUser(user);\r\n        successCount++;\r\n      } catch (error) {\r\n        console.error(`Falha ao salvar o usuário ${user.first_name}:`, error);\r\n        errorCount++;\r\n      }\r\n    }\r\n    \r\n    alert(`Salvo ${successCount} usuários com sucesso. ${errorCount > 0 ? `${errorCount} falha.` : ''}`);\r\n    fetchSavedUsers(); // Refresh the saved users list\r\n  } catch (error) {\r\n    alert('Erro ao salvar usuários');\r\n  } finally {\r\n    setLoading(false);\r\n  }\r\n};\r\n\r\n\r\n  useEffect(() => {\r\n    fetchUsers();\r\n    fetchSavedUsers();\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <header>\r\n        <h1>Sistema de gerenciamento de usuários</h1>\r\n        <p>O aplicativo exibe uma lista de usuários obtidos da  API e permite salvar esses dados em um arquivo CSV local. Após o salvamento,\r\n           o usuário pode editar ou excluir registros diretamente do arquivo e podendo adicionar novos usuários ao banco interno a qualquer momento.</p>\r\n        \r\n        {error && (\r\n          <div className=\"error-message\">\r\n            {error}\r\n          </div>\r\n        )}\r\n        \r\n        <nav>\r\n          <button \r\n            className={activeTab === 'api' ? 'active' : ''} \r\n            onClick={() => setActiveTab('api')}\r\n          >\r\n            Usuários\r\n          </button>\r\n          <button \r\n            className={activeTab === 'saved' ? 'active' : ''} \r\n            onClick={() => setActiveTab('saved')}\r\n          >\r\n            Usuários Salvos ({savedUsers.length})\r\n          </button>\r\n          \r\n        </nav>\r\n      </header>\r\n\r\n      <main>\r\n        {activeTab === 'api' && (\r\n          <div>\r\n            <div className=\"controls\">\r\n              <button onClick={fetchUsers} disabled={loading}>\r\n                {loading ? 'Carregando...' : 'Buscar novos usuários'}\r\n              </button>\r\n              {users.length > 0 && (\r\n                <button onClick={saveAllUsers} className=\"save-all\">\r\n                  Salvar todos os usuários no CSV\r\n                </button>\r\n              )}\r\n            </div>\r\n            \r\n            {users.length > 0 && (\r\n              <p className=\"info\"> {users.length} usuários</p>\r\n            )}\r\n            \r\n            <UserList \r\n              users={users} \r\n              onSave={saveUser}\r\n              onUpdate={fetchSavedUsers}\r\n            />\r\n          </div>\r\n        )}\r\n\r\n        {activeTab === 'saved' && (\r\n          <div>\r\n            <button onClick={fetchSavedUsers} className=\"refresh\">\r\n              Atualizar usuários salvos.\r\n            </button>\r\n            <UserList \r\n              users={savedUsers} \r\n              isSaved={true}\r\n              onUpdate={fetchSavedUsers}\r\n            />\r\n          </div>\r\n        )}\r\n\r\n      \r\n      </main>\r\n\r\n      <style jsx>{`\r\n        .container {\r\n          max-width: 1200px;\r\n          margin: 0 auto;\r\n          padding: 20px;\r\n        }\r\n        \r\n        header {\r\n          margin-bottom: 30px;\r\n          border-bottom: 2px solid #0070f3;\r\n          padding-bottom: 20px;\r\n        }\r\n        \r\n        h1 {\r\n          color: #0070f3;\r\n          margin-bottom: 5px;\r\n        }\r\n        \r\n        .error-message {\r\n          background-color: #fee;\r\n          border: 1px solid #fcc;\r\n          color: #c00;\r\n          padding: 10px;\r\n          border-radius: 4px;\r\n          margin: 10px 0;\r\n        }\r\n        \r\n        .info {\r\n          color: #666;\r\n          font-style: italic;\r\n          margin: 10px 0;\r\n        }\r\n        \r\n        nav {\r\n          display: flex;\r\n          gap: 10px;\r\n          margin-top: 20px;\r\n        }\r\n        \r\n        nav button {\r\n          padding: 10px 20px;\r\n          border: 1px solid #0070f3;\r\n          background: white;\r\n          color: #0070f3;\r\n          cursor: pointer;\r\n          border-radius: 5px;\r\n        }\r\n        \r\n        nav button.active {\r\n          background: #0070f3;\r\n          color: white;\r\n        }\r\n        \r\n        .controls {\r\n          margin-bottom: 20px;\r\n          display: flex;\r\n          gap: 10px;\r\n        }\r\n        \r\n        button {\r\n          padding: 10px 15px;\r\n          background: #0070f3;\r\n          color: white;\r\n          border: none;\r\n          border-radius: 5px;\r\n          cursor: pointer;\r\n        }\r\n        \r\n        button:disabled {\r\n          background: #ccc;\r\n          cursor: not-allowed;\r\n        }\r\n        \r\n        .save-all {\r\n          background: #28a745;\r\n        }\r\n        \r\n        .refresh {\r\n          background: #ffc107;\r\n          color: black;\r\n          margin-bottom: 20px;\r\n        }\r\n        \r\n        .search-form {\r\n          margin-bottom: 20px;\r\n          display: flex;\r\n          gap: 10px;\r\n        }\r\n        \r\n        .search-form input {\r\n          flex: 1;\r\n          padding: 10px;\r\n          border: 1px solid #ddd;\r\n          border-radius: 5px;\r\n        }\r\n      `}</style>\r\n    </div>\r\n  );\r\n}*/\r\n\r\n// /pages/index.js\r\n// /pages/index.js\r\nimport { useState } from 'react';\r\nimport { useUsers, useSavedUsers, useSearch } from '../lib/hooks';\r\nimport { TabNav } from '../components/ui/TabNav';\r\nimport { Button } from '../components/ui/Button';\r\nimport { SearchForm } from '../components/ui/SearchForm';\r\nimport { UserList } from '../components/users';\r\nimport styles from '../../styles/pages/index.module.css';\r\n\r\nexport default function Home() {\r\n  const [activeTab, setActiveTab] = useState('api');\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  \r\n  const {\r\n    users,\r\n    loading,\r\n    error: apiError,\r\n    fetchUsers,\r\n    saveUser,\r\n    saveAllUsers\r\n  } = useUsers();\r\n\r\n  const {\r\n    savedUsers,\r\n    error: savedError,\r\n    fetchSavedUsers,\r\n    updateSavedUsers\r\n  } = useSavedUsers();\r\n\r\n  const {\r\n    searchResults,\r\n    error: searchError,\r\n    handleSearch\r\n  } = useSearch();\r\n\r\n  const error = apiError || savedError || searchError;\r\n\r\n  const handleTabChange = (tab) => {\r\n    setActiveTab(tab);\r\n    if (tab === 'search') {\r\n      setSearchQuery('');\r\n    }\r\n  };\r\n\r\n  const handleSearchSubmit = async (e) => {\r\n    e.preventDefault();\r\n    await handleSearch(searchQuery);\r\n  };\r\n\r\n  const tabs = [\r\n    { id: 'api', label: 'API Users', count: null },\r\n    { id: 'saved', label: 'Saved Records', count: savedUsers.length },\r\n    { id: 'search', label: 'Search', count: null }\r\n  ];\r\n\r\n  return (\r\n    <div className={styles.container}>\r\n      <header className={styles.header}>\r\n        <h1>User Management System</h1>\r\n        <p>Random Data API Integration</p>\r\n        \r\n        {error && (\r\n          <div className=\"error-message\">\r\n            {error}\r\n          </div>\r\n        )}\r\n        \r\n        <TabNav \r\n          tabs={tabs} \r\n          activeTab={activeTab} \r\n          onTabChange={handleTabChange} \r\n        />\r\n      </header>\r\n\r\n      <main>\r\n        {activeTab === 'api' && (\r\n          <ApiUsersTab\r\n            users={users}\r\n            loading={loading}\r\n            onFetchUsers={fetchUsers}\r\n            onSaveUser={saveUser}\r\n            onSaveAllUsers={saveAllUsers}\r\n            onUpdateSaved={fetchSavedUsers}\r\n          />\r\n        )}\r\n\r\n        {activeTab === 'saved' && (\r\n          <SavedUsersTab\r\n            savedUsers={savedUsers}\r\n            onRefresh={fetchSavedUsers}\r\n            onUpdate={updateSavedUsers}\r\n          />\r\n        )}\r\n\r\n        {activeTab === 'search' && (\r\n          <SearchTab\r\n            searchQuery={searchQuery}\r\n            searchResults={searchResults}\r\n            onSearchChange={setSearchQuery}\r\n            onSearchSubmit={handleSearchSubmit}\r\n            onUpdateSaved={updateSavedUsers}\r\n          />\r\n        )}\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n\r\n// Tab Components\r\nfunction ApiUsersTab({ users, loading, onFetchUsers, onSaveUser, onSaveAllUsers, onUpdateSaved }) {\r\n  return (\r\n    <div>\r\n      <div className=\"controls\">\r\n        <Button \r\n          onClick={onFetchUsers} \r\n          disabled={loading}\r\n          variant=\"primary\"\r\n        >\r\n          {loading ? 'Loading...' : 'Fetch New Users'}\r\n        </Button>\r\n        {users.length > 0 && (\r\n          <Button \r\n            onClick={onSaveAllUsers} \r\n            variant=\"success\"\r\n          >\r\n            Save All Users to CSV\r\n          </Button>\r\n        )}\r\n      </div>\r\n      \r\n      {users.length > 0 && (\r\n        <p className=\"info\">Showing {users.length} users from API</p>\r\n      )}\r\n      \r\n      <UserList \r\n        users={users} \r\n        onSave={onSaveUser}\r\n        onUpdate={onUpdateSaved}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction SavedUsersTab({ savedUsers, onRefresh, onUpdate }) {\r\n  return (\r\n    <div>\r\n      <Button onClick={onRefresh} variant=\"warning\">\r\n        Refresh Saved Records\r\n      </Button>\r\n      <UserList \r\n        users={savedUsers} \r\n        isSaved={true}\r\n        onUpdate={onUpdate}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction SearchTab({ searchQuery, searchResults, onSearchChange, onSearchSubmit, onUpdateSaved }) {\r\n  return (\r\n    <div>\r\n      <SearchForm\r\n        query={searchQuery}\r\n        onChange={onSearchChange}\r\n        onSubmit={onSearchSubmit}\r\n        placeholder=\"Search by first name, last name, or email...\"\r\n      />\r\n      \r\n      {searchResults.length > 0 && (\r\n        <div>\r\n          <p className=\"info\">Found {searchResults.length} results</p>\r\n          <UserList \r\n            users={searchResults} \r\n            isSaved={true}\r\n            onUpdate={onUpdateSaved}\r\n          />\r\n        </div>\r\n      )}\r\n      \r\n      {searchQuery && searchResults.length === 0 && (\r\n        <p>No users found matching your search.</p>\r\n      )}\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"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","debugId":null}}]
}